<html>
	<head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>Bernie Krause Sound Samples</title>

        <!-- Bootstrap -->
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" rel="stylesheet" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

        <!-- wavesurfer.js -->
		<script src="https://unpkg.com/wavesurfer.js/dist/wavesurfer.min.js"></script>
		<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.spectrogram.js"></script>
		<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.cursor.js"></script>
		<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.timeline.min.js" type="text/javascript"></script>
		<script src="https://unpkg.com/wavesurfer.js/dist/plugin/wavesurfer.regions.js"></script>		

        <!-- App -->
        <script>
		// Create a WaveSurfer instance
		var wavesurfer;

		// Init on DOM ready
		document.addEventListener('DOMContentLoaded', function() {
			
			wavesurfer = WaveSurfer.create({
				container: '#waveform',
				waveColor: 'orange',
				progressColor: 'grey',
				plugins:[
					//WaveSurfer.cursor.create(),
					WaveSurfer.timeline.create({container: '#waveform-timeline'}),
					WaveSurfer.spectrogram.create({container: '#wave-spectrogram', labels: true}),
					WaveSurfer.regions.create({regions:[{start: 2.55, end: 5.4},{start: 9.7, end: 11.7}]})
				]
			});
			wavesurfer.load('https://npgallery.nps.gov/GetAsset/6a7315d4-682d-4df4-a50f-38f0eac75330/compressed?');
		});

		// Bind controls
		document.addEventListener('DOMContentLoaded', function() {
			var playPause = document.querySelector('#playPause');
			playPause.addEventListener('click', function() {
				wavesurfer.playPause();
			});

			// Toggle play/pause text
			wavesurfer.on('play', function() {
				document.querySelector('#play').style.display = 'none';
				document.querySelector('#pause').style.display = '';
			});
			wavesurfer.on('pause', function() {
				document.querySelector('#play').style.display = '';
				document.querySelector('#pause').style.display = 'none';
			});
			
		});
				
		</script>
    </head>

    <body cz-shortcut-listen="true">
        <div class="container">
			
			<!-- Player -->
            <div id="demo">
                <div class="row" style="margin: 20px 0">
                    <div class="col">
                        <div id="wave-spectrogram"></div>
						<div id="waveform">
                            <!-- Here be waveform -->
						</div>
						<div id="waveform-timeline"></div>
                    </div>
                </div>

				<!-- Button Controls -->
				<div class="controls" align="center">
					
					
					<button class="btn btn-primary" id="playPause">
						<span id="play" style="">
							<i class="fa fa-play"></i>
							Play
						</span>

						<span id="pause" style="display: none;">
							<i class="fa fa-pause"></i>
							Pause
						</span>
					</button>
					
				</div>
				
				<br>

            </div>
			
			<!-- Annotations Table -->
			<div id="annotations" class="table-responsive">
				<table class="wavesurfer-annotations table table-striped table-hover">
					<thead>
						<tr>
							<th class="wavesurfer-time">Time</th>
							<th class="wavesurfer-tier-Text">Sound</th>
						</tr>
					</thead>
					<tbody>
						<tr id="wavesurfer-alignable-EDU1" class="">
							<td class="wavesurfer-time">0.0–2.55</td>
							<td id="wavesurfer-annotation-TEXT1" data-ref="EDU1" data-start="0" data-end="2.55" class="wavesurfer-tier-Text">Douglas squirrel chirping</td>
						</tr>
						<tr id="wavesurfer-alignable-EDU2" class="">
							<td class="wavesurfer-time">2.55–5.4</td>
							<td id="wavesurfer-annotation-TEXT2" data-ref="EDU2" data-start="2.55" data-end="5.4" class="wavesurfer-tier-Text">Pilleated woodpecker drum</td>
						</tr>
						<tr id="wavesurfer-alignable-EDU3" class="">
							<td class="wavesurfer-time">5.4–9.7</td>
							<td id="wavesurfer-annotation-TEXT3" data-ref="EDU3" data-start="2.55" data-end="5.4" class="wavesurfer-tier-Text">Douglas squirrel chirping</td>
						</tr>
						<tr id="wavesurfer-alignable-EDU4" class="">
							<td class="wavesurfer-time">9.7-12</td>
							<td id="wavesurfer-annotation-TEXT4" data-ref="EDU4" data-start="9.7" data-end="12" class="wavesurfer-tier-Text">Pilleated Woodpecker 'fast wuk' call</td>
						</tr>
					</tbody>
				</table>
			</div>
			
        </div>

</body></html>